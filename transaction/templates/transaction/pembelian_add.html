{% extends "transaction/base-ui.html" %}
{% load humanize %}
{% load transaction_util %}
{% load staticfiles %}
{% block judul %}
Tambah Pembelian
{% endblock judul%}
{% block nav_pembelian %}active{% endblock nav_pembelian %}
{% block content %}
<div class="container">
	<form class="form-horizontal" action="{% url 'pembelian_add' %}" method="post" enctype="multipart/form-data">
		<div class="row">
			<div class="col-md-10 col-md-offset-1 well">
				<h3>Tambah Pembelian</h3>
				{% if form.errors %}
				<div class="alert">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					<strong>Error:</strong> {{ form.errors}}
				</div>
				{% endif %}
				{% csrf_token %}
				<div class="form-group">
					<label class="control-label col-md-2" for="id_{{ form.tanggal.html_name}}" >{{ form.tanggal.label }}</label>	
					<div class="col-md-10">
						{{ form.tanggal|add_class:"form-control" }}
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-md-2" for="id_{{ form.nota.html_name}}" >{{ form.nota.label }}</label>	
					<div class="col-md-10">
						{{ form.nota|add_class:"form-control" }}
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-md-2" for="id_cash" >Cash</label>	
					<div class="col-md-10">
						<input type="checkbox" name="cash" value="yes"/><input type="text" id="id_nota_cash" name="nota_cash" maxlength="20" placeholder="nota cash (opsional)" class="form-control"/>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-md-2" for="id_{{ form.nasabah.html_name}}" >{{ form.nasabah.label }}</label>	
					<div class="col-md-10">
						{{ form.nasabah|add_class:"form-control" }}
					</div>
				</div>

				<h3>Daftar Barang</h3>

				<input class="inputs-counter" type="hidden" name="total" value="1" />
				<div class="row">
					<div class="col-md-10 col-md-offset-1">
						<div class="dynamic-inputs">
							<div class="inputs">
								{#  #}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-4">
						<div class="toolbar">
							<button type=button class="add-input btn" >+</button>
							<button type=button class="remove-input btn" >-</button>
						</div>
					</div>
					<div class="col-md-2 col-md-offset-6">
						<button class="btn btn-primary" type="submit">Tambah</button>
					</div>
				</div>
			</div>
		</div>
	</form>
</div>
{% endblock content %}
{% block js_extra %}
{{ block.super }}
<script type="text/javascript">
	var options = jQuery.parseJSON('{{ options|jsonify|safe }}');

	function getOptionsHTML(){
		var result = "";
		for(var i = 0; i < options.length; i++ ){
			result += '<option value="'+ options[i].id +'">'+ options[i].kode + '-'+ options[i].nama+'-'+options[i].stabil+'</option>'
		}
		return result;
	}

	function getInputDiv(index){
		return '<div class="single-field"><select name="stok'+index+'">'+getOptionsHTML()+'<input type="text" name="jumlah'+index+'" placeholder="jumlah" class="input-small"/><input type="text" name="harga'+index+'" placeholder="harga satuan"/></div>'
	}

	$(document).ready(function(){
		$( "#id_{{ form.tanggal.html_name}}" ).datepicker({ dateFormat: "yy-mm-dd",
		"showAnim" : "slideDown",
		"changeMonth" : true,
		"changeYear" : true});
	});
</script>
<script src="{% static "js/input.js" %}"></script>
{% endblock js_extra %}